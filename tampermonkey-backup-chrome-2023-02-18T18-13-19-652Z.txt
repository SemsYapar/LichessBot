{"created_by":"Tampermonkey","version":"1","scripts":[{"name":"THT Lichess Bot","options":{"check_for_updates":false,"comment":null,"compatopts_for_requires":true,"compat_wrappedjsobject":false,"compat_metadata":false,"compat_foreach":false,"compat_powerful_this":null,"sandbox":null,"noframes":null,"unwrap":null,"run_at":null,"tab_types":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_connects":[],"orig_excludes":[],"orig_includes":[],"orig_matches":["https://lichess.org/*"],"orig_noframes":null,"orig_run_at":"document-idle","use_blockers":[],"use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]}},"storage":{"ts":1676722804010,"data":{}},"enabled":true,"position":1,"uuid":"c3f85ff9-7d2e-4407-b983-e217002b971e","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgVEhUIExpY2hlc3MgQm90Ci8vIEBtYXRjaCBodHRwczovL2xpY2hlc3Mub3JnLyoKLy8gQHZlcnNpb24gICAgICAgICAgMS4xCi8vIEBncmFudCBHTS54bWxIdHRwUmVxdWVzdAovLyA9PS9Vc2VyU2NyaXB0PT0KLy8gU2VtcyB0YXJhZsSxbmRhbiBpdGluYXlsYSBrb2RsYW5txLHFn3TEsXIKCmxldCBkYXRhID0gIm5vdF9wbGF5IgpsZXQgc2NyaXB0cyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJzY3JpcHQiKQpmb3IgKGxldCBpID0gMDsgaSA8IHNjcmlwdHMubGVuZ3RoOyBpKyspewoJaWYgKHNjcmlwdHNbaV0uaW5uZXJUZXh0LmluY2x1ZGVzKCJMaWNoZXNzUm91bmQuYm9vdCIpKXsKCQlsZXQgcmF3X2RhdGEgPSBzY3JpcHRzW2ldLmlubmVyVGV4dC5zdWJzdHJpbmcoNDEsc2NyaXB0c1tpXS5pbm5lclRleHQubGVuZ3RoLTMpCgkJZGF0YSA9IEpTT04ucGFyc2UocmF3X2RhdGEpLmRhdGEKCQlicmVhawoJfQp9CgppZiAoZGF0YSA9PSAibm90X3BsYXkiKXsKCWNvbnNvbGUubG9nKCJXZWxjb21lISBFbnRlciBhIGdhbWUgdG8gY29udHJvbCB0aGUgYm90XG5cbkd1aWRlOlxuICBBbHQrYSAtPiBBVVRPIG1vZGVcbiAgQWx0K20gLT4gTUFOVUVMIG1vZGVcbiAgQWx0K3MgLT4gc3RlcHMgaW4gbWFudWFsIG1vZGVcbiAgQWx0K3ggLT4gYW5hbHlzaXMgdGhlIGdhbWUgKGkgZ3Vlc3MgaXQgd2lsbCBiZSB1c2VkIG1vcmUgaW4gbWFudWFsIG1vZGUpXG5cblxuLUNhcmVmdWxseSBjb2RlZCBieSBTZW1zIikKCXJldHVybgp9Cgpjb25zdCBNQVhfREVMQVkgPSAwIC8vIGJ1bmEgMCBkZXJzZW5peiBiw7x0w7xuIGhhbWxlbGVyIGFuxLFuZGEgeWFwxLFsxLFyCmNvbnN0IFNUT0NLX0RFUFRIID0gMTAKCmxldCBjb2xvciA9IGRhdGEucGxheWVyLmNvbG9yCmxldCBwbHkgPSBkYXRhLmdhbWUudHVybnMKCmxvY2FsU3RvcmFnZS5wb3MgPSAiIgpmb3IgKGxldCBpPTE7IGkgIT0gZGF0YS5zdGVwcy5sZW5ndGg7IGkrKyl7CgkvL2RhdGEgZGFuIGTDtm5lbiBkZcSfZXJkZSByb2sgdmFyc2Egc3RvY2tmaXNoIGluIGlzdGVkacSfaSB2ZXJzaXlvbmEgZMO2bsO8xZ90w7xyw7x5b3J1eiBidW51IHlhcG1hbsSxbiBzb2NrZXQgeWFwxLFzxLFuZGFraSBrYWRhciBrb2xheSBvbG1hbWFzxLFuxLFuIHNlYmViaSBkYXRhIG7EsW4gc29ja2V0IHRlbiBkw7ZuZW4gZGF0YSBpbGUgYXluxLEgcm9rIGJpbGdpc2luZSBzYWhpcCBvbG1hbWFzxLEKCS8vZ2VuZSBzb2NrZXQgdGVraW5kZW4gZmFya2zEsSBvbGFyYWsgcHJvbW90aW9uIGRlxJ9lcmluaW4gbW9kaWZpeWUgZWRpbG1lbWVzaW5pbiBzZWJlYmkgaXNlIGJpbGdpbmluIHN0b2NrZmlzaCBpbiBpc3RlZGnEn2kgxZ9la2lsZGUgZMO2bm1lc2ksIG5lZGVuIGJ1IMWfZWtpbGRlIHlhcG3EscWfbGFyIGluYW7EsW4gYmlsbWl5b3J1bQoJaWYgKGRhdGEuc3RlcHNbaV0uc2FuID09ICJPLU8iKQoJCWxvY2FsU3RvcmFnZS5wb3MgKz0gIiAiK2RhdGEuc3RlcHNbaV0udWNpLnJlcGxhY2UoImgiLCJnIikKCWVsc2UgaWYgKGRhdGEuc3RlcHNbaV0uc2FuID09ICJPLU8tTyIpCglsb2NhbFN0b3JhZ2UucG9zICs9ICIgIitkYXRhLnN0ZXBzW2ldLnVjaS5yZXBsYWNlKCJhIiwiYyIpCgllbHNlCgkJbG9jYWxTdG9yYWdlLnBvcyArPSAiICIrZGF0YS5zdGVwc1tpXS51Y2kKfQoKaWYgKCFsb2NhbFN0b3JhZ2UuaGFzT3duUHJvcGVydHkoIk1PREUiKSkKCWxvY2FsU3RvcmFnZS5NT0RFID0gIkFVVE8iLy8gQVVUTywgTUFOVUVMIHwgZGVmYXVsdCBNT0RFIC0+IEFVVE8KCglsZXQgdXJscyA9IHsKCSJ0b3A1IjoiaHR0cDovL2xvY2FsaG9zdDo0NC9nZXRfdG9wNV9tb3ZlIiwKCSJiZXN0X29uZSI6Imh0dHA6Ly9sb2NhbGhvc3Q6NDQvZ2V0X2Jlc3RfbW92ZSIKfQoKbGV0IHBsYXllcl9uYW1lCmlmIChkYXRhLnBsYXllci5oYXNPd25Qcm9wZXJ0eSgidXNlciIpKQoJcGxheWVyX25hbWUgPSBkYXRhLnBsYXllci51c2VyLnVzZXJuYW1lCmVsc2UKCXBsYXllcl9uYW1lID0gIk1hZ2ljIEd1eSIKCmxldCBlbmVteV9uYW1lCmlmIChkYXRhLm9wcG9uZW50Lmhhc093blByb3BlcnR5KCJ1c2VyIikpCgllbmVteV9uYW1lID0gZGF0YS5vcHBvbmVudC51c2VyLnVzZXJuYW1lCmVsc2UKCWVuZW15X25hbWUgPSAibHZsICIrZGF0YS5vcHBvbmVudC5haSsiIGFpIgoKZnVuY3Rpb24gd2hvX3R1cm4ocGx5KXsKCWxldCB0dXJuCglpZiAocGx5JTIgIT0gMCl7CgkJdHVybiA9ICJibGFjayIKCX0KCWVsc2V7CgkJdHVybiA9ICJ3aGl0ZSIKCX0KICAgIHJldHVybiB0dXJuCn0KCmZ1bmN0aW9uIGdvX21vdmUoYmVzdF9tb3ZlKXsKCXNldFRpbWVvdXQoKCk9PnsKCQlsaWNoZXNzLnNvY2tldC5zZW5kKCJtb3ZlIix7YjoxLHU6YmVzdF9tb3ZlfSx7c2lnbjogbGljaGVzcy5zb2NrZXQuX3NpZ24sIGFja2FibGU6IHRydWUsIHdpdGhMYWc6IGZhbHNlLCBtaWxsaXM6IDQ2MTEuNX0pCgl9LCBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqTUFYX0RFTEFZKSoxMDAwKQp9CgpmdW5jdGlvbiBnZXRfbW92ZShhcmcpewoJcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKCQlHTS54bWxIdHRwUmVxdWVzdCh7CgkJCW1ldGhvZDogIlBPU1QiLAoJCQl1cmw6IHVybHNbYXJnXSwKCQkJZGF0YToicG9zPSIrbG9jYWxTdG9yYWdlLnBvcy50cmltKCkrIiZkZXB0aD0iK1NUT0NLX0RFUFRILAoJCQloZWFkZXJzOiB7CgkJCQkiQ29udGVudC1UeXBlIjogImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCIKCQkJfSwKCQkJb25sb2FkOiBmdW5jdGlvbihyZXNwb25zZSkgewoJCQkJcmVzb2x2ZShyZXNwb25zZS5yZXNwb25zZVRleHQpOwoJCQkJfSwKCQkJb25lcnJvcjogZnVuY3Rpb24oZXJyb3IpIHsKCQkJCXJlamVjdChlcnJvcik7CgkJCX0KCQl9KTsKCX0pOwp9CgoKbGljaGVzcy5zb2NrZXQud3MuYWRkRXZlbnRMaXN0ZW5lcigib3BlbiIsIChlKT0+ewoJLy9BVVRPIG1vZGRhIHNheWZhIHnDvGtsZW5kacSfaW5kZSBzxLFyYSBiaXpkZXlzZSBvdG9tYXRpayBoYW1sZSB5YXDEsXlvcnV6IGJ1cmFzxLEgc2F5ZXNpbmRlCglpZiAoY29sb3IgPT0gd2hvX3R1cm4ocGx5KSAmJiBsb2NhbFN0b3JhZ2UuTU9ERSA9PSAiQVVUTyIpewoJCWdldF9tb3ZlKCJiZXN0X29uZSIpLnRoZW4oZ29fbW92ZSkuY2F0Y2goKGVycm9yKT0+ewoJCQljb25zb2xlLmxvZygiY2FudCBnZXQgbW92ZSBmcm9tIHNlcnZlciBlcnJvci0+IiwgZXJyb3IpCgkJfSkKCX0KfSkKbGljaGVzcy5zb2NrZXQud3MuYWRkRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsIChlKSA9PiB7CglsZXQgZGF0ID0gSlNPTi5wYXJzZShlLmRhdGEpCglsZXQgdWNpID0gIiIKCWlmIChkYXQuaGFzT3duUHJvcGVydHkoImQiKSAmJiBkYXQuZC5oYXNPd25Qcm9wZXJ0eSgicGx5IikpCgkJcGx5ID0gZGF0LmQucGx5CgoJaWYgKGRhdC50ID09ICJjcm93ZCIpewoJCS8vc29ja2V0IGJhxZ9sYXTEsWxkxLHEn8SxbmRhIGTDtm7DvHlvciB2ZSBtYcOnIGVzbmFzxLFuZGEgb3l1bmN1bGFyIMSxbiDDp8Sxa8SxcCDDp8Sxa21hZMSxxJ/EsW7EsSBnw7ZzdGVyaXlvciB2ZSBzYW7EsXLEsW0gaXpsZXlpY2kgdmFyc2Egb251IGfDtnN0ZXJpeW9yIHsidCI6ImNyb3dkIiwiZCI6eyJ3aGl0ZSI6dHJ1ZSwiYmxhY2siOmZhbHNlLCJ3YXRjaGVycyI6eyJuYiI6MH19fQoJCWlmIChwbHkgPT0gMCl7CgkJCS8vb3l1bnVuIGJhxZ9sYWTEscSfxLEgaWZhZGUgZWRlcgoJCX0KCgl9CgllbHNlIGlmIChkYXQudCA9PSAibW92ZSIpewoKCQlpZiAoZGF0LmQuaGFzT3duUHJvcGVydHkoImNhc3RsZSIpKXsKCQkJdWNpID0gZGF0LmQuY2FzdGxlLmtpbmcuam9pbigiIikKCQl9CgkJZWxzZSBpZiAoZGF0LmQuaGFzT3duUHJvcGVydHkoInByb21vdGlvbiIpKXsKCQkJdWNpID0gZGF0LmQudWNpK2RhdC5kLnByb21vdGlvbi5waWVjZUNsYXNzLmNoYXJBdCgwKQoJCX0KCQllbHNlCgkJCXVjaSA9IGRhdC5kLnVjaQoKCQlsb2NhbFN0b3JhZ2UucG9zICs9ICIgIit1Y2kgLy9veXVudW4gYmHFn8SxbmRhbiBpdGliYXJlbiBveW5hbmEgYsO8dMO8biBoYW1sZWxlcmkgbG9jYWxzdG9yYWdlIGRlIHR1dHV5b3J1eiwgaGVyIG95dW4gYmHFn2xhZMSxxJ/EsW5kYSBzxLFmxLFybGFtYW3EsXogZ2VyZWtpeW9yIMWfaW1kaWxpayBiw7Z5bGUgYmlyIMOnw7Z6w7xtIGJ1bGR1bSBoYW1sZWxlcmkga2F5ZGV0bWVrIGnDp2luCgoJCWlmIChjb2xvciA9PSB3aG9fdHVybihwbHkpKXsKCQkJY29uc29sZS5sb2coZW5lbXlfbmFtZSsiIC0+ICIrdWNpKQoJCQlpZiAobG9jYWxTdG9yYWdlLk1PREUgPT0gIkFVVE8iKXsKCQkJCWdldF9tb3ZlKCJiZXN0X29uZSIpLnRoZW4oZ29fbW92ZSkuY2F0Y2goKGVycm9yKT0+ewoJCQkJCWNvbnNvbGUubG9nKCJjYW50IGdldCBtb3ZlIGZyb20gc2VydmVyIGVycm9yLT4iLCBlcnJvcikKCQkJCX0pCgkJCX0KCQl9IGVsc2V7CgkJCWNvbnNvbGUubG9nKHBsYXllcl9uYW1lKyIgLT4gIit1Y2kpCgkJfQoJfQoJZWxzZSBpZiAoZGF0LmQgPT0gImVuZERhdGEiKXsKCQkvL095dW4gYml0dGnEn2luZGUga2ltaW4ga2F6YW5kxLHEn8SxbsSxIGfDtnN0ZXJpeW9yIHsidCI6ImVuZERhdGEiLCJ2Ijo3LCJkIjp7Indpbm5lciI6ImJsYWNrIiwiZXJyb3IiOnsiaWQiOjMxLCJuYW1lIjoicmVzaWduIn19fQoJfQoKCn0pCmxldCBrZXlzUHJlc3NlZCA9IHt9Owpkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKGV2ZW50KSA9PiB7CiAgIGtleXNQcmVzc2VkW2V2ZW50LmtleV0gPSB0cnVlOwoKICAgaWYgKGtleXNQcmVzc2VkWydBbHQnXSkgewoJCWlmIChrZXlzUHJlc3NlZFsibSJdKXsKCQkJbG9jYWxTdG9yYWdlLk1PREUgPSAiTUFOVUVMIgoJCQljb25zb2xlLmxvZygiU3dpdGNoZWQgdG8gTUFOVUVMIG1vZGUiKQoJCX0KCQllbHNlIGlmIChrZXlzUHJlc3NlZFsicyJdKXsKCQkJaWYgKGNvbG9yID09IHdob190dXJuKHBseSkgJiYgbG9jYWxTdG9yYWdlLk1PREUgPT0gIk1BTlVFTCIpewoJCQkJZ2V0X21vdmUoImJlc3Rfb25lIikudGhlbihnb19tb3ZlKS5jYXRjaCgoZXJyb3IpPT57CgkJCQkJY29uc29sZS5sb2coImNhbnQgZ2V0IG1vdmUgZnJvbSBzZXJ2ZXIgZXJyb3ItPiIsIGVycm9yKQoJCQkJfSkKCQkJfSBlbHNlCgkJCQljb25zb2xlLmxvZygiTm90IHlvdXIgdHVybiBteSBmcmllbmQiKQoJCX0KCQllbHNlIGlmIChrZXlzUHJlc3NlZFsiYSJdKXsKCQkJbG9jYWxTdG9yYWdlLk1PREUgPSAiQVVUTyIKCQkJY29uc29sZS5sb2coIlN3aXRjaGVkIHRvIEFVVE8gbW9kZSIpCgkJCWlmIChjb2xvciA9PSB3aG9fdHVybihwbHkpICYmIGxvY2FsU3RvcmFnZS5NT0RFICE9ICJBVVRPIil7CgkJCQlnZXRfbW92ZSgiYmVzdF9vbmUiKS50aGVuKGdvX21vdmUpLmNhdGNoKChlcnJvcik9PnsKCQkJCQljb25zb2xlLmxvZygiY2FudCBnZXQgbW92ZSBmcm9tIHNlcnZlciBlcnJvci0+IiwgZXJyb3IpCgkJCQl9KQoJCQl9CgkJfQoJCWVsc2UgaWYgKGtleXNQcmVzc2VkWyJ4Il0pewoJCQlnZXRfbW92ZSgidG9wNSIpLnRoZW4oY29uc29sZS5sb2cpLmNhdGNoKChlcnJvcik9PnsKCQkJCWNvbnNvbGUubG9nKCJjYW50IGdldCBtb3ZlIGZyb20gc2VydmVyIGVycm9yLT4iLCBlcnJvcikKCQkJfSkKCQl9CgkJZWxzZSBpZiAoa2V5c1ByZXNzZWRbInQiXSkKCQkJY29uc29sZS5sb2coIkJvdCBzaG9ydGN1dCBpcyB3b3JraW5nLiIpCiAgIH0KfSk7Cgpkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIChldmVudCkgPT4gewogICBkZWxldGUga2V5c1ByZXNzZWRbZXZlbnQua2V5XTsKfSk7"}]}