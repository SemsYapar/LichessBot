{"created_by":"Tampermonkey","version":"1","scripts":[{"name":"THT Lichess Bot","options":{"check_for_updates":false,"comment":null,"compatopts_for_requires":true,"compat_wrappedjsobject":false,"compat_metadata":false,"compat_foreach":false,"compat_powerful_this":null,"sandbox":null,"noframes":null,"unwrap":null,"run_at":null,"tab_types":null,"override":{"use_includes":[],"orig_includes":[],"merge_includes":true,"use_matches":[],"orig_matches":["https://lichess.org/*"],"merge_matches":true,"use_excludes":[],"orig_excludes":[],"merge_excludes":true,"use_connects":[],"orig_connects":[],"merge_connects":true,"use_blockers":[],"orig_run_at":"document-idle","orig_noframes":null}},"storage":{"ts":1676722804010,"data":{}},"enabled":true,"position":1,"uuid":"c3f85ff9-7d2e-4407-b983-e217002b971e","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgVEhUIExpY2hlc3MgQm90Ci8vIEBtYXRjaCBodHRwczovL2xpY2hlc3Mub3JnLyoKLy8gQHZlcnNpb24gICAgICAgICAgMS4xCi8vIEBncmFudCBHTS54bWxIdHRwUmVxdWVzdAovLyA9PS9Vc2VyU2NyaXB0PT0KLy8gU2VtcyB0YXJhZsSxbmRhbiBpdGluYXlsYSBrb2RsYW5txLHFn3TEsXIKCmxldCBkYXRhID0gIm5vdF9wbGF5IgpsZXQgc2NyaXB0cyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJzY3JpcHQiKQpmb3IgKGxldCBpID0gMDsgaSA8IHNjcmlwdHMubGVuZ3RoOyBpKyspewoJaWYgKHNjcmlwdHNbaV0uaW5uZXJUZXh0LmluY2x1ZGVzKCJMaWNoZXNzUm91bmQuYm9vdCIpKXsKCQlsZXQgcmF3X2RhdGEgPSBzY3JpcHRzW2ldLmlubmVyVGV4dC5zdWJzdHJpbmcoNDEsc2NyaXB0c1tpXS5pbm5lclRleHQubGVuZ3RoLTMpCgkJZGF0YSA9IEpTT04ucGFyc2UocmF3X2RhdGEpLmRhdGEKCQlicmVhawoJfQp9CgppZiAoZGF0YSA9PSAibm90X3BsYXkiKXsKCWNvbnNvbGUubG9nKCJXZWxjb21lISBFbnRlciBhIGdhbWUgdG8gY29udHJvbCB0aGUgYm90XG5cbkd1aWRlOlxuICBBbHQrYSAtPiBBVVRPIG1vZGVcbiAgQWx0K20gLT4gTUFOVUVMIG1vZGVcbiAgQWx0K3MgLT4gc3RlcHMgaW4gbWFudWFsIG1vZGVcbiAgQWx0K3ggLT4gYW5hbHlzaXMgdGhlIGdhbWUgKGkgZ3Vlc3MgaXQgd2lsbCBiZSB1c2VkIG1vcmUgaW4gbWFudWFsIG1vZGUpXG5cblxuLUNhcmVmdWxseSBjb2RlZCBieSBTZW1zIikKCXJldHVybgp9Cgpjb25zdCBNQVhfREVMQVkgPSAwIC8vIGJ1bmEgMCBkZXJzZW5peiBiw7x0w7xuIGhhbWxlbGVyIGFuxLFuZGEgeWFwxLFsxLFyCmNvbnN0IFNUT0NLX0RFUFRIID0gMjAKCmxldCBjb2xvciA9IGRhdGEucGxheWVyLmNvbG9yCmxldCBwbHkgPSBkYXRhLmdhbWUudHVybnMKbGV0IHVjaSA9ICIiCmxvY2FsU3RvcmFnZS5wb3MgPSAiIgpmb3IgKGxldCBpPTE7IGkgIT0gZGF0YS5zdGVwcy5sZW5ndGg7IGkrKyl7CgkvL2RhdGEgZGFuIGTDtm5lbiBkZcSfZXJkZSByb2sgdmFyc2Egc3RvY2tmaXNoIGluIGlzdGVkacSfaSB2ZXJzaXlvbmEgZMO2bsO8xZ90w7xyw7x5b3J1eiBidW51IHlhcG1hbsSxbiBzb2NrZXQgeWFwxLFzxLFuZGFraSBrYWRhciBrb2xheSBvbG1hbWFzxLFuxLFuIHNlYmViaSBkYXRhIG7EsW4gc29ja2V0IHRlbiBkw7ZuZW4gZGF0YSBpbGUgYXluxLEgcm9rIGJpbGdpc2luZSBzYWhpcCBvbG1hbWFzxLEKCS8vZ2VuZSBzb2NrZXQgdGVraW5kZW4gZmFya2zEsSBvbGFyYWsgcHJvbW90aW9uIGRlxJ9lcmluaW4gbW9kaWZpeWUgZWRpbG1lbWVzaW5pbiBzZWJlYmkgaXNlIGJpbGdpbmluIHN0b2NrZmlzaCBpbiBpc3RlZGnEn2kgxZ9la2lsZGUgZMO2bm1lc2ksIG5lZGVuIGJ1IMWfZWtpbGRlIHlhcG3EscWfbGFyIGluYW7EsW4gYmlsbWl5b3J1bQoJaWYgKGRhdGEuc3RlcHNbaV0uc2FuID09ICJPLU8iKQoJCWxvY2FsU3RvcmFnZS5wb3MgKz0gIiAiK2RhdGEuc3RlcHNbaV0udWNpLnJlcGxhY2UoImgiLCJnIikKCWVsc2UgaWYgKGRhdGEuc3RlcHNbaV0uc2FuID09ICJPLU8tTyIpCglsb2NhbFN0b3JhZ2UucG9zICs9ICIgIitkYXRhLnN0ZXBzW2ldLnVjaS5yZXBsYWNlKCJhIiwiYyIpCgllbHNlCgkJbG9jYWxTdG9yYWdlLnBvcyArPSAiICIrZGF0YS5zdGVwc1tpXS51Y2kKfQppZiAoIWxvY2FsU3RvcmFnZS5oYXNPd25Qcm9wZXJ0eSgiTU9ERSIpKQoJbG9jYWxTdG9yYWdlLk1PREUgPSAiQVVUTyIvLyBBVVRPLCBNQU5VRUwgfCBkZWZhdWx0IE1PREUgLT4gQVVUTwpsZXQgdXJscyA9IHsKCSJ0b3A1IjoiaHR0cDovL2xvY2FsaG9zdDo0NC9nZXRfdG9wNV9tb3ZlIiwKCSJiZXN0X29uZSI6Imh0dHA6Ly9sb2NhbGhvc3Q6NDQvZ2V0X2Jlc3RfbW92ZSIKfQoKZnVuY3Rpb24gd2hvX3R1cm4ocGx5KXsKCWxldCB0dXJuCglpZiAocGx5JTIgIT0gMCl7CgkJdHVybiA9ICJibGFjayIKCX0KCWVsc2V7CgkJdHVybiA9ICJ3aGl0ZSIKCX0KICAgIHJldHVybiB0dXJuCn0KCmZ1bmN0aW9uIGdvX21vdmUoYmVzdF9tb3ZlKXsKCXNldFRpbWVvdXQoKCk9PnsKCQlsaWNoZXNzLnNvY2tldC5zZW5kKCJtb3ZlIix7YjoxLHU6YmVzdF9tb3ZlfSx7c2lnbjogbGljaGVzcy5zb2NrZXQuX3NpZ24sIGFja2FibGU6IHRydWUsIHdpdGhMYWc6IGZhbHNlLCBtaWxsaXM6IDQ2MTEuNX0pCgl9LCBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqTUFYX0RFTEFZKSoxMDAwKQp9CgpmdW5jdGlvbiBnZXRfbW92ZShhcmcpewoJcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKCQlHTS54bWxIdHRwUmVxdWVzdCh7CgkJCW1ldGhvZDogIlBPU1QiLAoJCQl1cmw6IHVybHNbYXJnXSwKCQkJZGF0YToicG9zPSIrbG9jYWxTdG9yYWdlLnBvcy50cmltKCkrIiZkZXB0aD0iK1NUT0NLX0RFUFRILAoJCQloZWFkZXJzOiB7CgkJCQkiQ29udGVudC1UeXBlIjogImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCIKCQkJfSwKCQkJb25sb2FkOiBmdW5jdGlvbihyZXNwb25zZSkgewoJCQkJcmVzb2x2ZShyZXNwb25zZS5yZXNwb25zZVRleHQpOwoJCQkJfSwKCQkJb25lcnJvcjogZnVuY3Rpb24oZXJyb3IpIHsKCQkJCXJlamVjdChlcnJvcik7CgkJCX0KCQl9KTsKCX0pOwp9CgpsaWNoZXNzLnNvY2tldC53cy5hZGRFdmVudExpc3RlbmVyKCJtZXNzYWdlIiwgKGUpID0+IHsKCWxldCBkYXQgPSBKU09OLnBhcnNlKGUuZGF0YSkKCglpZiAoZGF0Lmhhc093blByb3BlcnR5KCJkIikgJiYgZGF0LmQuaGFzT3duUHJvcGVydHkoInBseSIpKQoJCXBseSA9IGRhdC5kLnBseQoKCWlmIChkYXQudCA9PSAiY3Jvd2QiKXsKCQkvL3NvY2tldCBiYcWfbGF0xLFsZMSxxJ/EsW5kYSBkw7Zuw7x5b3IgdmUgbWHDpyBlc25hc8SxbmRhIG95dW5jdWxhciDEsW4gw6fEsWvEsXAgw6fEsWttYWTEscSfxLFuxLEgZ8O2c3Rlcml5b3IgdmUgc2FuxLFyxLFtIGl6bGV5aWNpIHZhcnNhIG9udSBnw7ZzdGVyaXlvciB7InQiOiJjcm93ZCIsImQiOnsid2hpdGUiOnRydWUsImJsYWNrIjpmYWxzZSwid2F0Y2hlcnMiOnsibmIiOjB9fX0KCQlpZiAocGx5ID09IDApewoJCQkvL295dW51biBiYcWfbGFkxLHEn8SxIGlmYWRlIGVkZXIKCQl9CgoJCWlmIChsb2NhbFN0b3JhZ2UuTU9ERSA9PSAiQVVUTyIgKXsKCQkJZ2V0X21vdmUoImJlc3Rfb25lIikudGhlbihnb19tb3ZlKS5jYXRjaCgoZXJyb3IpPT57CgkJCQljb25zb2xlLmxvZygic2VydmVyIGlsZSBpbGV0acWfaW0ga3VydWxhbWFkxLE6ICIsIGVycm9yKQoJCQl9KQoJCX0KCX0KCWVsc2UgaWYgKGRhdC50ID09ICJtb3ZlIil7CgoJCWlmIChkYXQuZC5oYXNPd25Qcm9wZXJ0eSgiY2FzdGxlIikpewoJCQl1Y2kgPSBkYXQuZC5jYXN0bGUua2luZy5qb2luKCIiKQoJCX0KCQllbHNlIGlmIChkYXQuZC5oYXNPd25Qcm9wZXJ0eSgicHJvbW90aW9uIikpewoJCQl1Y2kgPSBkYXQuZC51Y2krZGF0LmQucHJvbW90aW9uLnBpZWNlQ2xhc3MuY2hhckF0KDApCgkJfQoJCWVsc2UKCQkJdWNpID0gZGF0LmQudWNpCgoJCWxvY2FsU3RvcmFnZS5wb3MgKz0gIiAiK3VjaSAvL295dW51biBiYcWfxLFuZGFuIGl0aWJhcmVuIG95bmFuYSBiw7x0w7xuIGhhbWxlbGVyaSBsb2NhbHN0b3JhZ2UgZGUgdHV0dXlvcnV6LCBoZXIgb3l1biBiYcWfbGFkxLHEn8SxbmRhIHPEsWbEsXJsYW1hbcSxeiBnZXJla2l5b3IgxZ9pbWRpbGlrIGLDtnlsZSBiaXIgw6fDtnrDvG0gYnVsZHVtIGhhbWxlbGVyaSBrYXlkZXRtZWsgacOnaW4KCgkJaWYgKGNvbG9yID09IHdob190dXJuKHBseSkpewoJCQljb25zb2xlLmxvZygiZW5lbXkgLT4gIit1Y2kpCgkJCWlmIChsb2NhbFN0b3JhZ2UuTU9ERSA9PSAiQVVUTyIpewoJCQkJZ2V0X21vdmUoImJlc3Rfb25lIikudGhlbihnb19tb3ZlKS5jYXRjaCgoZXJyb3IpPT57CgkJCQkJY29uc29sZS5sb2coImNhbnQgZ2V0IG1vdmUgZnJvbSBzZXJ2ZXIgZXJyb3ItPiIsIGVycm9yKQoJCQkJfSkKCQkJfQoJCX0gZWxzZXsKCQkJY29uc29sZS5sb2coInlvdXIgZnJpZW5kIC0+ICIrdWNpKQoJCX0KCX0KCWVsc2UgaWYgKGRhdC5kID09ICJlbmREYXRhIil7CgkJLy9PeXVuIGJpdHRpxJ9pbmRlIGtpbWluIGthemFuZMSxxJ/EsW7EsSBnw7ZzdGVyaXlvciB7InQiOiJlbmREYXRhIiwidiI6NywiZCI6eyJ3aW5uZXIiOiJibGFjayIsImVycm9yIjp7ImlkIjozMSwibmFtZSI6InJlc2lnbiJ9fX0KCX0KCgp9KQpsZXQga2V5c1ByZXNzZWQgPSB7fTsKZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChldmVudCkgPT4gewogICBrZXlzUHJlc3NlZFtldmVudC5rZXldID0gdHJ1ZTsKCiAgIGlmIChrZXlzUHJlc3NlZFsnQWx0J10pIHsKCQlpZiAoa2V5c1ByZXNzZWRbIm0iXSl7CgkJCWxvY2FsU3RvcmFnZS5NT0RFID0gIk1BTlVFTCIKCQkJY29uc29sZS5sb2coIlN3aXRjaGVkIHRvIE1BTlVFTCBtb2RlIikKCQl9CgkJZWxzZSBpZiAoa2V5c1ByZXNzZWRbInMiXSl7CgkJCWlmIChjb2xvciA9PSB3aG9fdHVybihwbHkpICYmIGxvY2FsU3RvcmFnZS5NT0RFID09ICJNQU5VRUwiKXsKCQkJCWdldF9tb3ZlKCJiZXN0X29uZSIpLnRoZW4oZ29fbW92ZSkuY2F0Y2goKGVycm9yKT0+ewoJCQkJCWNvbnNvbGUubG9nKCJjYW50IGdldCBtb3ZlIGZyb20gc2VydmVyIGVycm9yLT4iLCBlcnJvcikKCQkJCX0pCgkJCX0gZWxzZQoJCQkJY29uc29sZS5sb2coIk5vdCB5b3VyIHR1cm4gbXkgZnJpZW5kIikKCQl9CgkJZWxzZSBpZiAoa2V5c1ByZXNzZWRbImEiXSl7CgkJCWxvY2FsU3RvcmFnZS5NT0RFID0gIkFVVE8iCgkJCWNvbnNvbGUubG9nKCJTd2l0Y2hlZCB0byBBVVRPIG1vZGUiKQoJCQlpZiAoY29sb3IgPT0gd2hvX3R1cm4ocGx5KSl7CgkJCQlnZXRfbW92ZSgiYmVzdF9vbmUiKS50aGVuKGdvX21vdmUpLmNhdGNoKChlcnJvcik9PnsKCQkJCQljb25zb2xlLmxvZygiY2FudCBnZXQgbW92ZSBmcm9tIHNlcnZlciBlcnJvci0+IiwgZXJyb3IpCgkJCQl9KQoJCQl9CgkJfQoJCWVsc2UgaWYgKGtleXNQcmVzc2VkWyJ4Il0pewoJCQlnZXRfbW92ZSgidG9wNSIpLnRoZW4oY29uc29sZS5sb2cpLmNhdGNoKChlcnJvcik9PnsKCQkJCWNvbnNvbGUubG9nKCJjYW50IGdldCBtb3ZlIGZyb20gc2VydmVyIGVycm9yLT4iLCBlcnJvcikKCQkJfSkKCQl9CgkJZWxzZSBpZiAoa2V5c1ByZXNzZWRbInQiXSkKCQkJY29uc29sZS5sb2coIkJvdCBzaG9ydGN1dCBpcyB3b3JraW5nLiIpCiAgIH0KfSk7Cgpkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIChldmVudCkgPT4gewogICBkZWxldGUga2V5c1ByZXNzZWRbZXZlbnQua2V5XTsKfSk7"}]}